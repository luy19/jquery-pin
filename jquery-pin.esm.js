import t from"jquery";var o=function(o){void 0===o&&(o={});var i=t(window),s=[],e=0,a=!1,n=function(){var e=i.width()||0;s.forEach((function(i){if(o.minWidth&&e<=o.minWidth)return i.parent().is(".pin-wrapper")&&i.unwrap(),i.css({width:"",left:"",top:"",position:""}),o.activeClass&&i.removeClass(o.activeClass),void(a=!0);a=!1;var s=o.containerSelector?i.closest(o.containerSelector):t(document.body),n={left:0,top:0},p=i.offset()||n,r=s.offset()||n,c=i.offsetParent().offset()||n;i.parent().is(".pin-wrapper")||i.wrap('<div class="pin-wrapper">');var d=t.extend({top:0,bottom:0},o.padding||{}),f=s.height()||0,l=i.outerHeight()||0,u=i.outerWidth()||0;i.data("pin",{pad:d,from:(o.containerSelector?r.top:p.top)-d.top,to:r.top+f-l-d.bottom,end:r.top+f,parentTop:c.top}),i.css({width:u}),i.parent().css("height",l)}))},p=function(){a||(e=i.scrollTop()||0,s=s.filter((function(o){return!!t(o).data("pin")})).map((function(i){var s,a=t(i),n=a.data("pin"),p=n.from-n.pad.bottom,r=n.to-n.pad.top;return p+(a.outerHeight()||0)>n.end?(a.css("position",""),a):(p<e&&r>e?("fixed"!==a.css("position")&&a.css({left:(null===(s=a.offset())||void 0===s?void 0:s.left)||0,top:n.pad.top}).css("position","fixed"),o.activeClass&&a.addClass(o.activeClass)):e>=r?(a.css({left:"",top:r-n.parentTop+n.pad.top}).css("position","absolute"),o.activeClass&&a.addClass(o.activeClass)):(a.css({position:"",top:"",left:""}),o.activeClass&&a.removeClass(o.activeClass)),a)})))},r=function(){n(),p()};return this.each((function(){var o=t(this),i=t(this).data("pin")||{};i&&i.update||(s.push(o),t("img",this).one("load",n),i.update=r,t(this).data("pin",i))})),i.on("scroll",p),i.on("resize",n),n(),i.on("load",r),this};t.fn.pin=o;export{o as pin};
